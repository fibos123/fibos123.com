var websites=[{icon:"fas fa-map-signs",name:"新手指南",sub:[{name:"",child:[{name:"FIBOS 是什么？",desc:"以及为什么要创造 FIBOS ？",url:"https://fibos.io/docs/guide/basic/about.md.html"},{name:"我需要兑换 FO 吗？",desc:"打开微博看看创始人响马先生的提醒",url:"http://file.gongxiangcj.com/nonooghj.png"},{name:"投 FIBOS 代码太难？",desc:"MORE wallet 推出傻瓜式一键投兑 FO 功能",url:"https://www.jianshu.com/p/4b1f2f2825f7"},{name:"能查看区块链状态吗？",desc:"FIBOS ROCKS 是一款出色的 FIBOS 区块链浏览器",url:"http://explorer.fibos.rocks/"},{name:"遇到问题？",desc:"加入电报群和开发者以及超过 2000 名成员沟通",url:"https://t.me/FIBOSIO"}]}]},{icon:"fas fa-bookmark",name:"常用",sub:[{name:"",child:[{name:"FIBOS ROCKS",icon:"fas fa-tachometer-alt",desc:"一款出色的 FIBOS 区块链浏览器",url:"http://explorer.fibos.rocks/"},{name:"Ironman",icon:"fas fa-wrench",desc:"基于浏览器的 FIBOS 安全插件",url:"http://foironman.com/"},{name:"FOToolkit",icon:"fas fa-toolbox",desc:"FIBOS 工具套件。安全，可靠，透明和快速",url:"https://fotoolkit.com/home"},{name:"FIBOS 安全节点",icon:"fas fa-bong",desc:"慢雾区推出的聚焦 FIBOS 生态安全网站",url:"https://fibos.slowmist.io/"},{name:"FIBOS.IO",icon:"fas fa-home",desc:"FIBOS 官方网站",url:"https://fibos.io/"},{name:"MORE Wallet",desc:"支持傻瓜式一键投兑 FO 功能",url:"https://more.top/"},{name:"51Token",desc:"支持 FO 闪兑的钱包",url:"http://www.51token.im/"},{name:"FO 钱包",desc:"基于 FIBOS 生态系统的智能钱包",url:"http://wallet.fo/"},{name:"开发文档",desc:"FIBOS 开发文档",url:"https://fibos.io/docs/guide/basic/about.md.html"},{name:"imondo",desc:"由 fibos4imondo 超级节点 建立的一个活跃的小众社区",url:"http://imondo.io/"}]}]},{icon:"fas fa-rocket",name:"生态",sub:[{name:"浏览器",child:[{name:"FIBOS ROCKS",icon:"",desc:"一款出色的 FIBOS 区块链浏览器",url:"http://explorer.fibos.rocks/",more:{name:"投票",color:"color-fibos-rocks",url:"http://explorer.fibos.rocks/voting#fibos123comm:fibosrockskr"}}]},{name:"监控",icon:"",child:[{name:"FIBOS 安全节点",icon:"fas fa-bong",desc:"慢雾区推出的聚焦 FIBOS 生态安全网站",url:"https://fibos.slowmist.io/"},{name:"番茄 FO 实时动态",desc:"关注 FO 实时动态，掌握通证持有者分布情况",url:"https://h5.tomatowallet.cn/fibos/fo-market.html"}]},{name:"工具",child:[{name:"Ironman",icon:"fas fa-wrench",desc:"基于浏览器的 FIBOS 安全插件",url:"http://foironman.com/",more:{icon:"",name:"教程",url:"http://imondo.io/article/1535848881409"}},{name:"FOToolkit",icon:"fas fa-toolbox",desc:"FIBOS 工具套件。安全，可靠，透明和快速",url:"https://fotoolkit.com/home"},{name:"FibosBP",desc:"FIBOS 在线工具包",url:"http://fibosbp.com/"},{name:"Fibos Startup",desc:"FIBOS 常用代码",url:"https://github.com/dabdevelop/fibos-startup/"}]},{name:"钱包",icon:"",child:[{name:"MORE Wallet",desc:"支持傻瓜式一键投兑 FO 功能",url:"https://more.top/",more:{icon:"",name:"教程",url:"https://www.jianshu.com/p/4b1f2f2825f7"}},{name:"51Token",desc:"支持 FO 闪兑的钱包",url:"http://www.51token.im/",more:{icon:"",name:"教程",url:"http://imondo.io/article/1535949163876"}},{name:"FO 钱包",desc:"基于 FIBOS 生态系统的智能钱包",url:"http://wallet.fo/",more:{icon:"",name:"教程",url:"https://fibos.io/5b8b51baaba908441dbbfc81.html"}},{name:"OneChain",desc:"数字货币全能 APP",url:"http://www.onechain.one/"},{name:"FoToken",desc:"安全、便捷、高效的数字资产管理工具",url:"http://www.fotoken.io/"}]},{name:"官方网站",child:[{name:"FIBOS.IO",icon:"fas fa-home",desc:"FIBOS 官方网站",url:"https://fibos.io/"},{name:"开发文档",desc:"FIBOS 开发文档",url:"https://fibos.io/docs/guide/basic/about.md.html"},{name:"Telegram",desc:"FIBOS 官方电报群",url:"https://t.me/FIBOSIO"},{name:"社区",desc:"FIBOS 官方社区",url:"http://bbs.dev.fo/"},{name:"GitHub",desc:"FIBOS 源代码",url:"https://github.com/FIBOSIO"}]},{name:"交易所",child:[{name:"CREX",desc:"数字资产价值兑换交易平台",url:"http://www.crexfit.com/"},{name:"Augur",desc:"做多 / 做空 FIBOS",url:"https://www.augur.net/",more:{icon:"",name:"教程",url:"http://imondo.io/article/1536026943861"}},{name:"币岁",desc:"了得资本投资的数字资产交易平台",url:"https://www.bisale.com/"},{name:"BIEX",desc:"全球区块链资产交易平台，位于塞舌尔共和国",url:"https://www.biex.io/"},{name:"币图",desc:"全球领先的数字资产交易平台",url:"https://www.tok.com/"}]},{name:"社区",child:[{name:"imondo",desc:"由 fibos4imondo 节点建立的一个活跃的小众社区",url:"http://imondo.io/"}]}]}];angular.module("appApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/monitor",{templateUrl:"views/monitor.html",controller:"MonitorCtrl",controllerAs:"monitor"}).when("/monitor/pointer",{templateUrl:"views/monitor_pointer.html",controller:"MonitorPointerCtrl",controllerAs:"monitorpointer"}).when("/monitor/logs",{templateUrl:"views/monitor_logs.html",controller:"MonitorLogsCtrl",controllerAs:"monitorlogs"}).otherwise({redirectTo:"/"})}]),angular.module("appApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path().slice(1).split("/")[0]},a.menuItems=[{name:"网站",icon:"fas fa-map-signs",url:""},{name:"节点监控",icon:"fab fa-connectdevelop",url:"monitor"}]}]),angular.module("appApp").controller("MainCtrl",["$scope",function(a){function b(){var a="https://api.fibos123.com/json2jsonp?url="+encodeURIComponent("https://fibos.io/getExchangeInfo?rand="+Math.random())+"&callback=?";$.getJSON(a,function(a){c=a.price,d=1/a.price,setTimeout(b,5e3)})}document.title="FIBOS 导航",a.data=websites,AOS.init({startEvent:"aosEvent",disable:"mobile",once:!0,offset:60}),document.dispatchEvent(new Event("aosEvent"));var c,d,e=0;b();var f=setInterval(function(){c&&(e%2===0?document.title=c+" FO / EOS | FIBOS 导航":document.title=d.toFixed(6)+" EOS / FO | FIBOS 导航",e++)},3e3);a.$on("$destroy",function(){clearInterval(f)})}]),angular.module("appApp").controller("MonitorCtrl",["$scope",function(a){function b(){$.getJSON("https://api.fibos123.com/bp_status",function(e){a.bp_status=e,d&&JSON.stringify(d)==JSON.stringify(e.rows2)||(a.bp_status_rows=e.rows2,d=e.rows2),a.$apply(),c=setTimeout(function(){b()},1e3)})}document.title=" 节点监控 | FIBOS 导航";var c,d={};b(),a.$on("$destroy",function(){clearTimeout(c)})}]),angular.module("appApp").controller("MonitorLogsCtrl",["$scope",function(a){function b(){d={},$.getJSON("https://api.fibos123.com/bp_status_change_logs",function(b){a.bp_status_change_logs=b,d&&d.length==b.rows.length||(a.bp_status_change_logs_rows=b.rows,d=b.rows),a.$apply()})}document.title=" 节点监控 | FIBOS 导航";var c,d=[],e=!1;b(),a.refresh=b,a.is_all=e,a.show_all=function(){a.is_all=!0},a.$on("$destroy",function(){clearTimeout(c)})}]),angular.module("appApp").controller("MonitorPointerCtrl",["$scope",function(a){function b(){function b(a,b,c,f){var g="";return"http"==c&&(g=b.api_endpoint||b.rpc_endpoint),"https"==c&&(g=b.ssl_endpoint),g?"http"===c&&0!==g.indexOf("http://")?f(a,{status:"ng",msg:"not http",endpoint:g}):"https"===c&&0!==g.indexOf("https://")?f(a,{status:"ng",msg:"not https",endpoint:g}):(f(a,{status:"connecting",msg:"connecting",endpoint:g}),void e(a,g+"/v1/chain/get_info","GET",{},function(a,b,h){return h&&h.head_block_num?(e(a,g+"/v1/history/get_transaction","POST",'{"id":"ba59b1eb11f49d9d7ef881e3055c0ec7956e9b7921605a3cc6d5172e3de54154"}',function(a,b,e){if(e&&e.id){var e=d[a][c];return e.history=!0,f(a,e)}}),f(a,{status:"ok",msg:"",number:h.head_block_num})):f(a,{status:"ng",msg:"offline"})},function(a,b,c){if("timeout"==c)return f(a,{status:"ng",msg:"timeout"});var b="https://api.fibos123.com/json2jsonp?url="+encodeURIComponent(b)+"&callback=?";e(a,b,"GET",{},function(a,b,c){if(c&&c.head_block_num){var b="https://api.fibos123.com/json2jsonp?url="+encodeURIComponent(g+"/v1/history/get_transaction")+"&callback=?";return e(a,b,"POST",'{"id":"ba59b1eb11f49d9d7ef881e3055c0ec7956e9b7921605a3cc6d5172e3de54154"}',function(a,b,c){return c&&c.id?f(a,{history:!0}):void 0}),f(a,{status:"ok",msg:"",cors:!1,number:c.head_block_num})}return f(a,{status:"ng",msg:"offline"})},function(a,b,c){return f(a,{status:"ng",msg:"error"})})})):f(a,!1)}function c(a,b,c){var d=b.p2p_endpoint;if(!d)return c(a,!1);var e=d.split(":"),g=e[0],h=e[1];c(a,{status:"connecting",msg:"connecting",endpoint:d}),f(a,g,h,function(a,b,e,f){var g=f&&f.msg;g&&f.msg.indexOf("open")>=0?c(a,{status:"ok",msg:"open",endpoint:d}):g&&f.msg.indexOf("blocked")>=0?c(a,{status:"ng",msg:"blocked",endpoint:d}):g&&f.msg.indexOf("invalid")>=0?c(a,{status:"ng",msg:"invalid",endpoint:d}):c(a,{status:"ng",msg:"timeout",endpoint:d})},function(b){c(a,{status:"ng",msg:"timeout",endpoint:d})})}function e(a,b,c,d,e,f){$.ajax({type:c,timeout:5e3,url:b,data:d,dataType:"json",success:function(c,d){e(a,b,c)},error:function(c,d,e){f(a,b,d)}})}function f(a,b,c,d,e){var f="https://api.fibos123.com/json2jsonp?url="+encodeURIComponent("https://networkappers.com/api/port.php?ip="+b+"&port="+c)+"&callback=?";$.ajax({type:"GET",cache:!1,timeout:5e3,url:f,data:{},dataType:"json",success:function(e,f){d(a,b,c,e)},error:function(a,d,f){e(i,b,c,d)}})}$.post("https://rpc-mainnet.fibos123.com/v1/chain/get_table_rows",JSON.stringify({json:"true",code:"producerjson",scope:"producerjson",table:"producerjson",limit:1e3}),function(e){d={};for(var f=0;f<e.rows.length;f++){var g=JSON.parse(e.rows[f].json),h=e.rows[f].owner;d[h]={bpname:h,http:{status:"unset",msg:"unset",endpoint:"",number:0,history:!1,cors:!0},https:{status:"unset",msg:"unset",endpoint:"",number:0,history:!1,cors:!0},p2p:{status:"unset",msg:"unset",endpoint:""}};for(var i=0;i<g.nodes.length;i++)b(h,g.nodes[i],"http",function(a,b){b&&(d[a].http=Object.assign(d[a].http,b))}),b(h,g.nodes[i],"https",function(a,b){b&&(d[a].https=Object.assign(d[a].https,b))}),c(h,g.nodes[i],function(a,b){b&&(d[a].p2p=b)})}a.list=d,a.$apply(),$('[data-toggle="tooltip"]').tooltip()})}document.title=" 节点监控 | FIBOS 导航";var c,d={};if("https:"===window.location.protocol)return void(window.location.href="http:"+window.location.href.substring(window.location.protocol.length));b(),a.refresh=b;var e=setInterval(function(){a.$apply(),$('[data-toggle="tooltip"]').tooltip()},100);a.$on("$destroy",function(){clearTimeout(c),clearInterval(e)})}]),angular.module("appApp").run(["$templateCache",function(a){"use strict";a.put("views/main.html",'<main role="main"> <section class="jumbotron text-center"> <div class="bg"></div> <div class="container"> <h1 class="jumbotron-heading">FIBOS 导航</h1> <p class="lead"> 一个收录 FIBOS 网址及资源的小导航 </p> </div> </section> <div class="py-5 bg-light"> <div class="container part-websites"> <section ng-repeat="value in data"> <div class="panel-heading"><a id="{{ value.name }}" data-aos="fade-up"> <i class="{{ value.icon }}"></i> {{ value.name }}</a> </div> <content ng-repeat="value in value.sub" data-aos="fade-up" ng-class="{ line1: value.child.length <= 5 }"> <header ng-if="value.name"> <h2 class="icon-download"><a id="{{ value.name }}"><i ng-if="value.icon" class="{{ value.icon }}"></i> {{ value.name }}</a></h2> </header> <ul class="website-list"> <li ng-repeat="value in value.child"> <a href="{{ value.url }}" class="website" target="_blank"> <p class="name"><i ng-if="value.icon" class="{{ value.icon }}"></i> {{ value.name }}</p> <p class="description">{{ value.desc }}</p> </a> <p class="more" ng-if="value.more"> <a href="{{ value.more.url }}" target="_blank" class="{{ value.more.color }}"> <i ng-if="value.more.icon" class="{{ value.more.icon }}"></i> {{ value.more.name }} </a> </p> </li> </ul> </content> </section> </div> </div> </main>'),a.put("views/monitor.html",'<main role="main"> <div class="py-4 bg-light"> <div class="container part-monitor"> <ul class="nav nav-pills flex-column flex-sm-row"> <li class="nav-item"> <a class="nav-link active" ng-href="#!/monitor">出块节点在线状态</a> </li> <li class="nav-item"> <a class="nav-link" ng-href="#!/monitor/logs">出块节点在线状态变更记录</a> </li> <li class="nav-item"> <a class="nav-link" ng-href="#!/monitor/pointer">接入点状态监测</a> </li> </ul><br> <h3>出块节点在线状态</h3> <div ng-if="bp_status"> 最新区块：{{ bp_status.head_block_num | number }}<br> 状态更新时间：{{ bp_status.bp_status_refresh_time | date : "yyyy-MM-dd HH:mm:ss Z" }} </div> <table ng-if="bp_status_rows" class="table table-bordered table-hover table-sm table-striped monospaced-font"> <thead> <tr> <th width="50" class="text-center">编号</th> <th>节点账户</th> <th width="20%">状态</th> <th width="20%">生产区块</th> <th width="35%">最终生产时间</th> </tr> </thead> <tbody> <tr ng-repeat="(key, value) in bp_status_rows" ng-class="{ \'font-weight-bold\': bp_status.head_block_producer == value.bpname }"> <td align="center">{{ $index + 1 }}</td> <td>{{ value.bpname }}</td> <td ng-if="bp_status.head_block_num - value.number <= 242" class="icon icon-ok"> online </td> <td ng-if="bp_status.head_block_num - value.number > 242" class="icon icon-ng"> offline </td> <td> {{ value.number | number }} </td> <td> {{ value.date | date : "yyyy-MM-dd HH:mm:ss Z" }} </td> </tr> </tbody> </table> <div ng-if="!bp_status">获取中...</div> </div> </div> </main>'),a.put("views/monitor_logs.html",'<main role="main"> <div class="py-4 bg-light"> <div class="container part-monitor"> <ul class="nav nav-pills flex-column flex-sm-row"> <li class="nav-item"> <a class="nav-link" ng-href="#!/monitor">出块节点在线状态</a> </li> <li class="nav-item"> <a class="nav-link active" ng-href="#!/monitor/logs">出块节点在线状态变更记录</a> </li> <li class="nav-item"> <a class="nav-link" ng-href="#!/monitor/pointer">接入点状态监测</a> </li> </ul><br> <div class="d-flex justify-content-between"> <div> <h3>出块节点在线状态变更记录 </h3> <div ng-if="bp_status_change_logs"> 记录开始时间：{{ bp_status_change_logs.log_birthtime | date : "yyyy-MM-dd HH:mm:ss Z" }} <br> 记录更新时间：{{ bp_status_change_logs.now_time | date : "yyyy-MM-dd HH:mm:ss Z" }} </div> </div> <div class="mt-auto" ng-if="bp_status_change_logs"> <a class="a-link" ng-click="refresh()"><i class="fas fa-sync-alt"></i> 刷新</a> </div> </div> <table ng-if="bp_status_change_logs_rows" class="table table-bordered table-hover table-sm table-striped monospaced-font"> <thead> <tr><th width="50" class="text-center">编号</th><th>时间</th><th>节点账户</th><th>旧状态</th><th>新状态</th></tr> </thead> <tbody> <tr ng-repeat="(key, value) in bp_status_change_logs_rows.slice().reverse()" ng-if="$index < 20 || is_all"> <td align="center">{{ bp_status_change_logs_rows.length - $index }}</td> <td>{{ value.date | date : "yyyy-MM-dd HH:mm:ss Z" }}</td> <td>{{ value.bp }}</td> <td class="icon" ng-class="{\'icon-ok\': value.from == \'online\', \'icon-ng\': value.from == \'offline\', \'icon-unknown\': value.from == \'over21\'}">{{ value.from }}</td> <td class="icon" ng-class="{\'icon-ok\': value.to == \'online\', \'icon-ng\': value.to == \'offline\', \'icon-unknown\': value.to == \'over21\'}">{{ value.to }}</td> </tr> </tbody> </table> <a class="a-link" ng-click="show_all()" ng-if="!is_all && bp_status_change_logs"> 查看剩余的 {{ bp_status_change_logs_rows.length - 20 }} 条记录 </a> <div ng-if="!bp_status_change_logs">获取中...</div> </div> </div> </main>'),a.put("views/monitor_pointer.html",'<main role="main"> <div class="py-4 bg-light"> <div class="container part-monitor"> <ul class="nav nav-pills flex-column flex-sm-row"> <li class="nav-item"> <a class="nav-link" ng-href="#!/monitor">出块节点在线状态</a> </li> <li class="nav-item"> <a class="nav-link" ng-href="#!/monitor/logs">出块节点在线状态变更记录</a> </li> <li class="nav-item"> <a class="nav-link active" ng-href="#!/monitor/pointer">接入点状态监测</a> </li> </ul><br> <div class="d-flex justify-content-between"> <div><h3>接入点状态监测 </h3></div> <div class="mt-auto" ng-if="list"> <a class="a-link" ng-click="refresh()"><i class="fas fa-sync-alt"></i> 刷新</a> </div> </div> <table ng-if="list" class="table table-bordered table-hover table-sm table-striped monospaced-font"> <thead> <tr> <th width="50" class="text-center">编号</th> <th>节点账户</th> <th width="25%">HTTP 状态 </th> <th width="25%">HTTPS 状态</th> <th width="25%">P2P 状态 <span data-toggle="tooltip" data-html="true" title="\n						1. 检查是否开放端口。<br />\n						2. 超时时间为 1 秒。<br />\n						3. 端口开放不代表可连接，请各 BP 设置 max-clients 。<br />\n						4. 端口检查由 https://networkappers.com/tools/open-port-checker 提供。\n						"> <i class="far fa-question-circle"></i> </span> </th> </tr> </thead> <tbody> <tr ng-repeat="(key, value) in list"> <td align="center">{{ $index + 1 }}</td> <td>{{ value.bpname }}</td> <td> <span ng-if="value.http.history" class="green" data-toggle="tooltip" title="已开启 history 插件"> <i class="fas fa-history"></i> </span> <span class="icon" ng-class="{\'icon-ok\': value.http.status == \'ok\', \'icon-ng\': value.http.status == \'ng\', \'icon-connecting\': value.http.status == \'connecting\', \'icon-unknown\': value.http.status == \'unset\', \'icon-warning\': !value.http.cors}" data-toggle="tooltip" title="{{ value.http.endpoint }}"> <span>{{ value.http.msg }}</span> <span ng-if="value.http.status == \'ok\'">{{ value.http.number | number }}</span> </span> <span ng-if="!value.http.cors" data-toggle="tooltip" title="未开启 CORS"> <i class="fas fa-exclamation-circle"></i> </span> <a class="hide-link float-right" ng-if="value.http.status != \'unset\'" target="_blank" href="{{ value.http.endpoint }}/v1/chain/get_info" data-toggle="tooltip" title="打开新窗口查看接入点"> <i class="fas fa-link"></i> </a> </td> <td> <span ng-if="value.https.history" class="green" data-toggle="tooltip" title="已开启 history 插件"> <i class="fas fa-history"></i> </span> <span class="icon" ng-class="{\'icon-ok\': value.https.status == \'ok\', \'icon-ng\': value.https.status == \'ng\', \'icon-connecting\': value.https.status == \'connecting\', \'icon-unknown\': value.https.status == \'unset\', \'icon-warning\': !value.https.cors}" data-toggle="tooltip" title="{{ value.https.endpoint }}"> <span>{{ value.https.msg }}</span> <span ng-if="value.https.status == \'ok\'">{{ value.https.number | number }}</span> </span> <span ng-if="!value.https.cors" data-toggle="tooltip" title="未开启 CORS"> <i class="fas fa-exclamation-circle"></i> </span> <a class="hide-link float-right" ng-if="value.https.status != \'unset\'" target="_blank" href="{{ value.https.endpoint }}/v1/chain/get_info" data-toggle="tooltip" title="打开新窗口查看接入点"> <i class="fas fa-link"></i> </a> </td> <td> <span data-toggle="tooltip" title="{{ value.p2p.endpoint }}" class="icon" ng-class="{\'icon-ok\': value.p2p.status == \'ok\', \'icon-ng\': value.p2p.status == \'ng\', \'icon-connecting\': value.p2p.status == \'connecting\', \'icon-unknown\': value.p2p.status == \'unset\', \'icon-warning\': value.p2p.warning}"> {{ value.p2p.msg }} </span> <span> <a class="hide-link float-right" ng-if="value.p2p.status != \'unset\'" target="_blank" href="https://networkappers.com/api/port.php?ip={{ value.p2p.endpoint.split(\':\')[0] }}&port={{ value.p2p.endpoint.split(\':\')[1] }}" data-toggle="tooltip" title="打开新窗口查看接入点"> <i class="fas fa-link"></i> </a> </span> </td> </tr> </tbody> </table> <div ng-if="!list">获取中...</div> </div> </div> </main>')}]);