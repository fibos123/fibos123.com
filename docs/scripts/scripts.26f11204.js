"use strict";angular.module("appApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/monitor",{templateUrl:"views/monitor.html",controller:"MonitorCtrl",controllerAs:"monitor"}).otherwise({redirectTo:"/"})}]),angular.module("appApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path().slice(1)},a.menuItems=[{name:"网站",icon:"fas fa-map-signs",url:""},{name:"节点监控",icon:"fab fa-connectdevelop",url:"monitor"}]}]),angular.module("appApp").controller("MainCtrl",["$scope",function(a){function b(){var a="https://json2jsonp.com/?url="+encodeURIComponent("https://fibos.io/getExchangeInfo?rand="+Math.random())+"&callback=?";$.getJSON(a,function(a){c=a.price,d=1/a.price,setTimeout(b,2e3)})}document.title="FIBOS 导航",$.getJSON("data.json",function(b){a.data=b,a.$apply(),AOS.init({startEvent:"aosEvent",disable:"mobile",once:!0,offset:60}),document.dispatchEvent(new Event("aosEvent"))});var c,d,e=0;b();var f=setInterval(function(){c&&(e%2===0?document.title=c+" FO / EOS | FIBOS 导航":document.title=d.toFixed(6)+" EOS / FO | FIBOS 导航",e++)},3e3);a.$on("$destroy",function(){clearInterval(f)})}]),angular.module("appApp").controller("MonitorCtrl",["$scope",function(a){function b(){$.getJSON("https://api.fibos123.com/bp_status",function(c){a.bp_status=c,f&&JSON.stringify(f)==JSON.stringify(c.rows)||(a.bp_status_rows=c.rows,f=c.rows),a.$apply(),d=setTimeout(function(){b()},1e3)})}function c(){$.getJSON("https://api.fibos123.com/bp_status_change_logs",function(b){a.bp_status_change_logs=b,g&&g.length==b.rows.length||(a.bp_status_change_logs_rows=b.rows,g=b.rows),a.$apply(),e=setTimeout(function(){c()},1e3)})}document.title=" 节点监控 | FIBOS 导航",b(),c();var d,e,f={},g=[];a.$on("$destroy",function(){clearTimeout(d),clearTimeout(e)})}]),angular.module("appApp").run(["$templateCache",function(a){a.put("views/main.html",'<main role="main"> <section class="jumbotron text-center"> <div class="bg"></div> <div class="container"> <h1 class="jumbotron-heading">FIBOS 导航</h1> <p class="lead"> 一个汇集 FIBOS 优质网址及资源的导航网站 </p> </div> </section> <div class="album py-5 bg-light"> <div id="content" class="container"> <section ng-repeat="value in data"> <div class="panel-heading"><a id="{{ value.name }}" data-aos="fade-up"> <i class="{{ value.icon }}"></i> {{ value.name }}</a> </div> <content ng-repeat="value in value.sub" data-aos="fade-up" ng-class="{ line1: value.child.length <= 5 }"> <header ng-if="value.name"> <h2 class="icon-download"><a id="{{ value.name }}"><i ng-if="value.icon" class="{{ value.icon }}"></i> {{ value.name }}</a></h2> </header> <ul class="website-list"> <li ng-repeat="value in value.child"> <a href="{{ value.url }}" class="website" target="_blank"> <p class="name"><i ng-if="value.icon" class="{{ value.icon }}"></i> {{ value.name }}</p> <p class="description">{{ value.desc }}</p> </a> <p class="more" ng-if="value.more"> <a href="{{ value.more.url }}" target="_blank" class="{{ value.more.color }}"> <i ng-if="value.more.icon" class="{{ value.more.icon }}"></i> {{ value.more.name }} </a> </p> </li> </ul> </content> </section> </div> </div> </main>'),a.put("views/monitor.html",'<main role="main"> <div class="album py-5 bg-light"> <div id="content" class="container"> <h3>出块节点在线状态</h3> <div ng-if="bp_status"> 最新区块：{{ bp_status.head_block_num | number }}<br> 状态更新时间：{{ bp_status.bp_status_refresh_time | date : "yyyy-MM-dd HH:mm:ss.sss Z" }} </div> <table ng-if="bp_status_rows" class="table table-bordered table-hover table-sm table-striped monospaced-font"> <tr><th width="50" class="text-center">排名</th><th>节点账户</th><th>状态</th></tr> <tr ng-repeat="(key, value) in bp_status_rows"> <td align="center">{{ $index + 1 }}</td> <td>{{ key }}</td> <td class="{{ value }}">{{ value }}</td> </tr> </table> <div ng-if="!bp_status">获取中...</div> <h3>出块节点在线状态变更记录</h3> <div ng-if="bp_status_change_logs"> 记录开始时间：{{ bp_status_change_logs.log_birthtime | date : "yyyy-MM-dd HH:mm:ss.sss Z" }} <br> 记录更新时间：{{ bp_status_change_logs.now_time | date : "yyyy-MM-dd HH:mm:ss.sss Z" }} </div> <table ng-if="bp_status_change_logs_rows" class="table table-bordered table-hover table-sm table-striped monospaced-font"> <tr><th width="50" class="text-center">编号</th><th>时间</th><th>节点账户</th><th>旧状态</th><th>新状态</th></tr> <tr ng-repeat="(key, value) in bp_status_change_logs_rows"> <td align="center">{{ $index + 1 }}</td> <td>{{ value.date | date : "yyyy-MM-dd HH:mm:ss Z" }}</td> <td>{{ value.bp }}</td> <td class="{{ value.from }}">{{ value.from }}</td> <td class="{{ value.to }}">{{ value.to }}</td> </tr> </table> <div ng-if="!bp_status_change_logs">获取中...</div> <a href="https://api.fibos123.com/" target="_blank">查看 API</a> </div> </div> </main>')}]);